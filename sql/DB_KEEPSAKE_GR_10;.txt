CREATE DATABASE KEEPSAKE;
GO


USE KEEPSAKE;
GO

CREATE TABLE PATIENT_INFORMATION (
    PT_ID INT NOT NULL PRIMARY KEY,
    PT_LNAME VARCHAR(30) NOT NULL,
    PT_FNAME VARCHAR(20) NOT NULL,
    PT_MNAME VARCHAR(20) NULL,
    DT_OF_BIRTH DATETIME NOT NULL,
    MT_NAME VARCHAR(60) NULL,
    FT_NAME VARCHAR(60) NULL,
    CON_NUM VARCHAR(60) NULL,
    EMAIL_ADD VARCHAR(60) NULL
);

CREATE TABLE DOCTOR (
    DR_ID INT NOT NULL PRIMARY KEY,
    DR_NAME VARCHAR(60) NOT NULL,
    DEPPT VARCHAR(60) NOT NULL,
    SPLTY VARCHAR(30) NOT NULL,
    CONTACT VARCHAR(15) NULL
);

CREATE TABLE ACCOUNTS (
    USER_ID INT NOT NULL PRIMARY KEY,
    USERTYPE BIT NOT NULL,
    PASSWORD VARCHAR(15) NOT NULL,
    EMP_ID CHAR(15) NULL,
    USER_LNAME VARCHAR(60) NOT NULL,
    USER_FNAME VARCHAR(60) NOT NULL
);

CREATE TABLE PRESCRIPTIONS (
    RX_ID INT NOT NULL PRIMARY KEY,
    CU_TYPE TINYINT NOT NULL,
    [DATE] DATETIME NOT NULL,
    AGE INT NOT NULL,
    FINDINGS NVARCHAR(MAX) NOT NULL,
    CONSULT NVARCHAR(MAX) NULL,
    DR_INS NVARCHAR(MAX) NOT NULL,
    RETURN_DT DATETIME NULL,
    PT_ID INT REFERENCES PATIENT_INFORMATION(PT_ID),
    DR_ID INT REFERENCES DOCTOR(DR_ID)
);

CREATE TABLE ATPMC_MSRMT (
    AM_ID INT NOT NULL PRIMARY KEY,
    WEIGHT FLOAT NOT NULL,
    LENGTH FLOAT NOT NULL,
    HEAD_CC FLOAT NOT NULL,
    CHEST_CC FLOAT NOT NULL,
    ABDML_GT FLOAT NOT NULL,
    PT_ID INT REFERENCES PATIENT_INFORMATION(PT_ID),
    RX_ID INT REFERENCES PRESCRIPTIONS(RX_ID)
);

CREATE TABLE SCREENING_TEST (
    ST_ID INT NOT NULL PRIMARY KEY,
    ENS_DATE DATE NOT NULL,
    ENS_REMARKS BIT NOT NULL,
    NHS_DATE DATE NOT NULL,
    NHS_REAR BIT NOT NULL,
    POS_CCHD_LEAR BIT NOT NULL,
    POS_CCHD_DATE DATE NULL,
    POS_CCHD_RHAND BIT NOT NULL,
    POS_CCHD_LHAND BIT NOT NULL,
    ROR_DATE DATE NULL,
    ROR_REMARKS VARCHAR(60) NULL,
    PT_ID INT REFERENCES PATIENT_INFORMATION(PT_ID)
);

CREATE TABLE IMMUNIZATION_RECORD (
    VAX_ID INT NOT NULL PRIMARY KEY,
    VAX VARCHAR(60) NOT NULL,
    DOSAGE FLOAT NOT NULL,
    [DATE] DATE NOT NULL,
    REMARKS NVARCHAR(MAX) NULL,
    PT_ID INT REFERENCES PATIENT_INFORMATION(PT_ID),
    DR_ID INT REFERENCES DOCTOR(DR_ID)
);

CREATE TABLE PATIENT_IMMUNIZATION (
    PI_ID INT NOT NULL PRIMARY KEY,
    PT_ID INT REFERENCES PATIENT_INFORMATION(PT_ID),
    VAX_ID INT REFERENCES IMMUNIZATION_RECORD(VAX_ID)
);